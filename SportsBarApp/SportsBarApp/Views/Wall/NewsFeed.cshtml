@model SportsBarApp.Models.ViewModels.ProfileViewModel

@{
    ViewBag.Title = "SportsBar";
    Layout = "~/Views/Shared/_LayoutProfileWall.cshtml";    

}

<div class="container" id="wrapper-wall">
    <div class="row">
        <div class="col-md-3 hidden-xs hidden-sm">   
            <table>
                <tr>
                    <td>  
                       <img src='@Model.CurrentProfile.ProfilePic.FileName' />
                        
                    </td>
                    <td>
                        @Html.DisplayFor(m => m.CurrentProfile.FirstName) @Html.DisplayFor(m => m.CurrentProfile.LastName)
                    </td>
                </tr>
               
                <tr>
                    <td>
                        @Html.LabelFor(m => m.CurrentProfile.DateOfBirth, "DOB")
                    </td>
                    <td>
                        @Html.DisplayFor(m => m.CurrentProfile.DateOfBirth)
                    </td>
                </tr>
                <tr>
                    <td>
                        @Html.LabelFor(m => m.CurrentProfile.City)
                    </td>
                    <td>
                        @Html.DisplayFor(m => m.CurrentProfile.City)
                    </td>
                </tr>
                <tr>
                    <td>
                        @Html.LabelFor(m => m.CurrentProfile.Country)                            
                    </td>
                    <td>
                        @Html.DisplayFor(m => m.CurrentProfile.Country)
                    </td>
                </tr>
                <tr>
                    <td>
                        @Html.LabelFor(m => m.CurrentProfile.FavouriteSports, "Sports")
                    </td>
                    <td>
                        @Html.DisplayFor(m => m.CurrentProfile.FavouriteSports)
                    </td>
                </tr>
                <tr>
                    <td>
                        @Html.LabelFor(m => m.CurrentProfile.FavouriteTeams, "Teams") 
                    </td>
                    <td>
                        @Html.DisplayFor(m => m.CurrentProfile.FavouriteTeams)
                    </td>
                </tr>
            </table>
                
                    
        </div>
        <div class="col-md-6 col-sm-12">
            @using (Html.BeginForm("UploadPost", "Activity", FormMethod.Post, new { @class = "form-write-post" }))
            {
                @Html.AntiForgeryToken()
                <section>
                    @Html.TextArea("Message", "", 3, 20, new { @class = "form-control", @placeholder = "What's up ?" })

                    @Html.Hidden("page", Model.CurrentView)
                    <input type="submit" value="Post" class="btn btn-info" />
                   
                </section>
            }
           
            <div id="filter" class="form-control">
                <input type="search" placeholder="Filter posts i.e. soccer basketball" />
                <button class="btn btn-info"><i class="fa fa-filter fa-lg" aria-hidden="true"></i>
                </button>
            </div>
            @Html.Partial("PostsComments", Model.Posts, new ViewDataDictionary { { "Domain", Model.CurrentView } })
        


            </div>
        <div class="col-md-3 friends-window friends-wall hidden-xs hidden-sm">
            <ul>
                @foreach (var item in Model.Friends)
                {
                    <li><img class="img-friends thumbnail" src="@item.ProfilePic.FileName" />@Html.ActionLink(item.FirstName + "  " + item.LastName, "MyProfile", "Profile", new { id = item.ProfileId }, new { @class = "links-to-friends" })</li>
                }
                    
            </ul>
                    
        </div>
    </div>
</div>

@section scripts{
    <script src="~/Scripts/libs/jquery.signalR-2.2.2.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>    
    <script src="~/Scripts/appScripts/friendConnection.js"></script>
    <script src="~/Scripts/appScripts/search.js"></script>
    <script type="text/javascript">
        $(function () {

            $("#filter button").click(function () {
                var query = $('#filter input').val();
               
                $.get('@Url.Action("FilterPosts", "Wall")',
                    { query: query },
                    function (data) {
                        $('#posts-wrapper').html(data);
                        
                    });

            });




        });


</script>

}







